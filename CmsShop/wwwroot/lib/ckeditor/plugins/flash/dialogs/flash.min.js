!function(){function t(e,t,a){var l=c[this.id];if(l)for(var i=this instanceof CKEDITOR.ui.dialog.checkbox,n=0;n<l.length;n++){var o=l[n];switch(o.type){case 1:if(!e)continue;if(null!==e.getAttribute(o.name))return e=e.getAttribute(o.name),void(i?this.setValue("true"==e.toLowerCase()):this.setValue(e));i&&this.setValue(!!o.default);break;case 2:if(!e)continue;if(o.name in a)return e=a[o.name],void(i?this.setValue("true"==e.toLowerCase()):this.setValue(e));i&&this.setValue(!!o.default);break;case 4:if(!t)continue;if(t.getAttribute(o.name))return e=t.getAttribute(o.name),void(i?this.setValue("true"==e.toLowerCase()):this.setValue(e));i&&this.setValue(!!o.default)}}}function d(e,t,a){var l=c[this.id];if(l)for(var i=""===this.getValue(),n=this instanceof CKEDITOR.ui.dialog.checkbox,o=0;o<l.length;o++){var s=l[o];switch(s.type){case 1:if(!e||"data"==s.name&&t&&!e.hasAttribute("data"))continue;var d=this.getValue();i||n&&d===s.default?e.removeAttribute(s.name):e.setAttribute(s.name,d);break;case 2:if(!e)continue;var m,d=this.getValue();i||n&&d===s.default?s.name in a&&a[s.name].remove():s.name in a?a[s.name].setAttribute("value",d):((m=CKEDITOR.dom.element.createFromHtml("<cke:param></cke:param>",e.getDocument())).setAttributes({name:s.name,value:d}),e.getChildCount()<1?m.appendTo(e):m.insertBefore(e.getFirst()));break;case 4:if(!t)continue;d=this.getValue(),i||n&&d===s.default?t.removeAttribute(s.name):t.setAttribute(s.name,d)}}}for(var c={id:[{type:1,name:"id"}],classid:[{type:1,name:"classid"}],codebase:[{type:1,name:"codebase"}],pluginspage:[{type:4,name:"pluginspage"}],src:[{type:2,name:"movie"},{type:4,name:"src"},{type:1,name:"data"}],name:[{type:4,name:"name"}],align:[{type:1,name:"align"}],class:[{type:1,name:"class"},{type:4,name:"class"}],width:[{type:1,name:"width"},{type:4,name:"width"}],height:[{type:1,name:"height"},{type:4,name:"height"}],hSpace:[{type:1,name:"hSpace"},{type:4,name:"hSpace"}],vSpace:[{type:1,name:"vSpace"},{type:4,name:"vSpace"}],style:[{type:1,name:"style"},{type:4,name:"style"}],type:[{type:4,name:"type"}]},e="play loop menu quality scale salign wmode bgcolor base flashvars allowScriptAccess allowFullScreen".split(" "),a=0;a<e.length;a++)c[e[a]]=[{type:4,name:e[a]},{type:2,name:e[a]}];for(e=["play","loop","menu"],a=0;a<e.length;a++)c[e[a]][0].default=c[e[a]][1].default=!0;CKEDITOR.dialog.add("flash",function(m){var c,o=!m.config.flashEmbedTagOnly,s=m.config.flashAddEmbedTag||m.config.flashEmbedTagOnly,e="<div>"+CKEDITOR.tools.htmlEncode(m.lang.common.preview)+'<br><div id="cke_FlashPreviewLoader'+CKEDITOR.tools.getNextNumber()+'" style="display:none"><div class="loading">&nbsp;</div></div><div id="cke_FlashPreviewBox'+CKEDITOR.tools.getNextNumber()+'" class="FlashPreviewBox"></div></div>';return{title:m.lang.flash.title,minWidth:420,minHeight:310,getModel:function(e){return(e=e.getSelection().getSelectedElement())&&"flash"===e.data("cke-real-element-type")?e:null},onShow:function(){this.fakeImage=this.objectNode=this.embedNode=null,c=new CKEDITOR.dom.element("embed",m.document);var e=this.getModel(m);if(e){this.fakeImage=e;var t=null,a=null,l={};if("cke:object"==(i=m.restoreRealElement(e)).getName()){0<(i=(t=i).getElementsByTag("embed","cke")).count()&&(a=i.getItem(0));for(var i,n=0,o=(i=t.getElementsByTag("param","cke")).count();n<o;n++){var s=(d=i.getItem(n)).getAttribute("name"),d=d.getAttribute("value");l[s]=d}}else"cke:embed"==i.getName()&&(a=i);this.objectNode=t,this.embedNode=a,this.setupContent(t,a,l,e)}},onOk:function(){var e=null,t=null,a=null;if(this.fakeImage?(e=this.objectNode,t=this.embedNode):(o&&(e=CKEDITOR.dom.element.createFromHtml("<cke:object></cke:object>",m.document)).setAttributes({classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}),s&&((t=CKEDITOR.dom.element.createFromHtml("<cke:embed></cke:embed>",m.document)).setAttributes({type:"application/x-shockwave-flash",pluginspage:"http://www.macromedia.com/go/getflashplayer"}),e&&t.appendTo(e))),e)for(var a={},l=e.getElementsByTag("param","cke"),i=0,n=l.count();i<n;i++)a[l.getItem(i).getAttribute("name")]=l.getItem(i);this.commitContent(e,t,a,l={},i={}),(e=m.createFakeElement(e||t,"cke_flash","flash",!0)).setAttributes(i),e.setStyles(l),this.fakeImage?(e.replace(this.fakeImage),m.getSelection().selectElement(e)):m.insertElement(e)},onHide:function(){this.preview&&this.preview.setHtml("")},contents:[{id:"info",label:m.lang.common.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["280px","110px"],align:"right",className:"cke_dialog_flash_url",children:[{id:"src",type:"text",label:m.lang.common.url,required:!0,validate:CKEDITOR.dialog.validate.notEmpty(m.lang.flash.validateSrc),setup:t,commit:d,onLoad:function(){function t(e){c.setAttribute("src",e),a.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(c.getAttribute("src"))+'" type="application/x-shockwave-flash"></embed>')}var a=this.getDialog();a.preview=a.getContentElement("info","preview").getElement().getChild(3),this.on("change",function(e){e.data&&e.data.value&&t(e.data.value)}),this.getInputElement().on("change",function(){t(this.getValue())},this)}},{type:"button",id:"browse",filebrowser:"info:src",hidden:!0,style:"display:inline-block;margin-top:14px;",label:m.lang.common.browseServer}]}]},{type:"hbox",widths:["25%","25%","25%","25%","25%"],children:[{type:"text",id:"width",requiredContent:"embed[width]",style:"width:95px",label:m.lang.common.width,validate:CKEDITOR.dialog.validate.htmlLength(m.lang.common.invalidHtmlLength.replace("%1",m.lang.common.width)),setup:t,commit:d},{type:"text",id:"height",requiredContent:"embed[height]",style:"width:95px",label:m.lang.common.height,validate:CKEDITOR.dialog.validate.htmlLength(m.lang.common.invalidHtmlLength.replace("%1",m.lang.common.height)),setup:t,commit:d},{type:"text",id:"hSpace",requiredContent:"embed[hspace]",style:"width:95px",label:m.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(m.lang.flash.validateHSpace),setup:t,commit:d},{type:"text",id:"vSpace",requiredContent:"embed[vspace]",style:"width:95px",label:m.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(m.lang.flash.validateVSpace),setup:t,commit:d}]},{type:"vbox",children:[{type:"html",id:"preview",style:"width:95%;",html:e}]}]},{id:"Upload",hidden:!0,filebrowser:"uploadButton",label:m.lang.common.upload,elements:[{type:"file",id:"upload",label:m.lang.common.upload,size:38},{type:"fileButton",id:"uploadButton",label:m.lang.common.uploadSubmit,filebrowser:"info:src",for:["Upload","upload"]}]},{id:"properties",label:m.lang.flash.propertiesTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"scale",type:"select",requiredContent:"embed[scale]",label:m.lang.flash.scale,default:"",style:"width : 100%;",items:[[m.lang.common.notSet,""],[m.lang.flash.scaleAll,"showall"],[m.lang.flash.scaleNoBorder,"noborder"],[m.lang.flash.scaleFit,"exactfit"]],setup:t,commit:d},{id:"allowScriptAccess",type:"select",requiredContent:"embed[allowscriptaccess]",label:m.lang.flash.access,default:"",style:"width : 100%;",items:[[m.lang.common.notSet,""],[m.lang.flash.accessAlways,"always"],[m.lang.flash.accessSameDomain,"samedomain"],[m.lang.flash.accessNever,"never"]],setup:t,commit:d}]},{type:"hbox",widths:["50%","50%"],children:[{id:"wmode",type:"select",requiredContent:"embed[wmode]",label:m.lang.flash.windowMode,default:"",style:"width : 100%;",items:[[m.lang.common.notSet,""],[m.lang.flash.windowModeWindow,"window"],[m.lang.flash.windowModeOpaque,"opaque"],[m.lang.flash.windowModeTransparent,"transparent"]],setup:t,commit:d},{id:"quality",type:"select",requiredContent:"embed[quality]",label:m.lang.flash.quality,default:"high",style:"width : 100%;",items:[[m.lang.common.notSet,""],[m.lang.flash.qualityBest,"best"],[m.lang.flash.qualityHigh,"high"],[m.lang.flash.qualityAutoHigh,"autohigh"],[m.lang.flash.qualityMedium,"medium"],[m.lang.flash.qualityAutoLow,"autolow"],[m.lang.flash.qualityLow,"low"]],setup:t,commit:d}]},{type:"hbox",widths:["50%","50%"],children:[{id:"align",type:"select",requiredContent:"object[align]",label:m.lang.common.align,default:"",style:"width : 100%;",items:[[m.lang.common.notSet,""],[m.lang.common.left,"left"],[m.lang.flash.alignAbsBottom,"absBottom"],[m.lang.flash.alignAbsMiddle,"absMiddle"],[m.lang.flash.alignBaseline,"baseline"],[m.lang.common.alignBottom,"bottom"],[m.lang.common.alignMiddle,"middle"],[m.lang.common.right,"right"],[m.lang.flash.alignTextTop,"textTop"],[m.lang.common.alignTop,"top"]],setup:t,commit:function(e,t,a,l,i){var n=this.getValue();d.apply(this,arguments),n&&(i.align=n)}},{type:"html",html:"<div></div>"}]},{type:"fieldset",label:CKEDITOR.tools.htmlEncode(m.lang.flash.flashvars),children:[{type:"vbox",padding:0,children:[{type:"checkbox",id:"menu",label:m.lang.flash.chkMenu,default:!0,setup:t,commit:d},{type:"checkbox",id:"play",label:m.lang.flash.chkPlay,default:!0,setup:t,commit:d},{type:"checkbox",id:"loop",label:m.lang.flash.chkLoop,default:!0,setup:t,commit:d},{type:"checkbox",id:"allowFullScreen",label:m.lang.flash.chkFull,default:!0,setup:t,commit:d}]}]}]},{id:"advanced",label:m.lang.common.advancedTab,elements:[{type:"hbox",children:[{type:"text",id:"id",requiredContent:"object[id]",label:m.lang.common.id,setup:t,commit:d}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"bgcolor",requiredContent:"embed[bgcolor]",label:m.lang.flash.bgcolor,setup:t,commit:d},{type:"text",id:"class",requiredContent:"embed(cke-xyz)",label:m.lang.common.cssClass,setup:t,commit:d}]},{type:"text",id:"style",requiredContent:"embed{cke-xyz}",validate:CKEDITOR.dialog.validate.inlineStyle(m.lang.common.invalidInlineStyle),label:m.lang.common.cssStyle,setup:t,commit:d}]}]}})}();